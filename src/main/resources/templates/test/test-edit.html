<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity6">

<link rel="stylesheet" href="http://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
<script src="https://code.jquery.com/jquery-1.12.4.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>

<head th:replace="fragments/header :: header">
  <title>페이지</title>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
</head>

<body>

  <div th:replace="fragments/body_header :: body_header" />

  <div style="height:20rem;"></div>

  <main class="th-layout-main ">
    <!-- [S]personal-fILPV8V8Xp -->
    <div class="opilsol-N27" id="" data-bid="vllPv8WPQi">
      <div class="content-container">
        <div class="contents-form container-md">
          <div class="contents-form-top d-flex justify-content-between">
            <h3 class="inputset-tit">시험 내역 수정</h3>
            <span class="req">필수 선택입니다.</span>
          </div>
          <div class="contents-form tableset">
            <div class="tableset-inner">

              <!--  enctype="multipart/form-data" 옵션 삭제 -->
              <form id="myForm" th:object="${test}" method="post">


              <table class="tableset-table table">
                <colgroup>
                  <col>
                  <col>
                  <col>
                  <col>
                </colgroup>
                <tbody>
                <tr>
                  <th>
                    <span class="req label">시험 진행일시</span>
                  </th>
                  <td colspan="3" style="display: flex; justify-content: space-between;">
                    <p th:text="*{dateTime.toString()}"></p>
                  </td>
                  <td></td>

                </tr>
                <tr>
                  <th>
                    <label class="req label">주행시험장</label>
                  </th>
                  <td>
                    <p th:text="*{groundName}"></p>
                  </td>
                </tr>
                <tr>
                  <th>
                    <label class="label" for="Email">협력사</label>
                  </th>
                  <td class="d-flex justify-content-start align-items-center" colspan="3">
                    <div class="inputset col-4">
                      <input type="text" th:field="*{partners}" class="inputset-input form-control" th:placeholder="*{partners}">
                    </div>
                  </td>
                </tr>
                <tr>
                  <th>
                    <label class="req label" for="Title">제목</label>
                  </th>
                  <td colspan="3">
                    <div class="inputset">
                      <input type="text" th:field="*{title}" class="inputset-input form-control" th:placeholder="*{title}">
                    </div>
                  </td>
                </tr>
                <tr>
                  <th>
                    <label class="req label" for="Inquiry">시험 내용</label>
                  </th>
                  <td colspan="3">
                    <div class="inputset">
                      <textarea th:field="*{contents}" class="inputset-input form-control textarea" th:placeholder="*{contents}"></textarea>
                    </div>
                  </td>
                </tr>
                <tr>
                  <th>
                    <span class="label">파일첨부</span>
                  </th>
                  <td colspan="3">
                    <div class="fileset fileset-lg fileset-label">
                      <label>
                        <div class="fileset-body">
                          <div class="fileset-group">
                            <input type="file" class="fileset-input" name="file" multiple>
                            <button class="fileset-cancel"></button>
                          </div>
                          <span class="btnset btnset-line btnset-mono btnset-lg btnset-rect fileset-upload">파일첨부</span>
                        </div>
                      </label>
                    </div>
                    <p class="p1 co-text3">이미지 형식의 jpg(jpeg), png나 문서형식의 doc(docx), ppt(pptx), hwp, pdf만 첨부 가능합니다.</p>
                    <p class="p1 co-text3">첨부파일은 20MB를 초과할 수 없으며, 최대 1개까지 가능합니다.</p>
                  </td>
                </tr>
                <tr>
                  <td style="border:none; display: flex; justify-content: right; align-items: right;">
                    <!--<button type="button" id="deleteButton" class="btnset btnset-lg btnset-mono btnset-line" style="height:6rem;">시험 내역 삭제</button>-->
                    <button type="submit" value="Post" id="postButton" class="btnset btnset-lg btnset-mono btnset-line" style="height:6rem;">수정</button>
                  </td>
                </tr>
                </tbody>
              </table>

              </form>

            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- [E]personal-fILPV8V8Xp -->
  </main>

  <div th:replace="fragments/footer :: footer" />
  <script th:inline="javascript">

    $(function(){


      /*<![CDATA[*/
      var testId = /*[[${testId}]]*/ 'default';
      /*]]>*/

      document.getElementById('deleteButton').addEventListener('click', function() {
        fetch("/test/" + testId + "/edit", {
          method: 'DELETE'
        }).then(response => {
          if (response.ok) {
            // 요청 성공, 페이지 리디렉트
            window.location.href = '/test';
          } else {
            // 오류 처리
            console.error('삭제 실패');
          }
        }).catch(error => console.error('오류:', error));
      });

    })
  </script>
  <script src="/js/weather.js"></script>
  <script src="/js/setting.js"></script>
  <script src="/js/plugin.js"></script>
  <script src="/js/template.js"></script>
  <script src="/js/common.js"></script>
  <script src="/js/script.js"></script>
  <script src="/js/jquery-ui.min.js"></script>
</body>